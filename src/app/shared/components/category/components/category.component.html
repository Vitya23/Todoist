<ng-container #DelCategoryInsertionPoint></ng-container>
@if(categories() ){
<small> {{ category().title }}</small>
}

<p-dialog
  [header]="header"
  [(visible)]="active"
  [draggable]="false"
  [resizable]="false"
  [modal]="true"
>
  <ng-template pTemplate="content">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      @if(mode !== mods.ADD){
      <div class="categories">
        <p-dropdown
          *ngIf="categories() as categories"
          styleClass="width-100"
          appendTo="body"
          [options]="categories"
          formControlName="id"
          [showClear]="true"
          optionLabel="title"
          optionValue="id"
          [filter]="categories.length >= 5"
          placeholder="Выберите категорию"
        ></p-dropdown>
      </div>
      } @if(mode !== mods.DELETE){
      <input
        trimOnBlur
        class="input"
        formControlName="title"
        type="text"
        pInputText
        placeholder="Введите название"
      />
      }
      <div class="footer">
        @if(mode === mods.ADD){
        <div class="footer__setAll">
          <p-checkbox
            [binary]="true"
            inputId="setAll"
            formControlName="setAll"
          ></p-checkbox>
          <label for="setAll">Добавить ко всем задачам без категории</label>
        </div>
        }

        <div class="footer__buttons">
          <p-button
            type="submit"
            size="small"
            class="footer_button"
            [label]="label"
            severity="danger"
            [plain]="true"
            [disabled]="
              mode !== mods.DELETE
                ? this.form.invalid
                : this.form.controls['id']?.invalid
            "
          ></p-button>
          <p-button
            (click)="active = false"
            size="small"
            label="Отмена"
            [text]="true"
            [plain]="true"
          ></p-button>
        </div>
      </div>
    </form>
  </ng-template>
</p-dialog>
