<ng-container #DelCategoryInsertionPoint></ng-container>
@if(!category().title?.length && !mode ){

<p-button
  label="Добавить категорию"
  icon="pi pi-plus"
  [text]="true"
  size="small"
  (click)="active = true"
></p-button>

} @if(categories() ){

<div class="category">
  <div class="category__title">
    <small> {{ category().title }}</small>
  </div>
</div>

}

<p-dialog
  [header]="mode === 'edit' ? 'Изменение категории' : 'Добавление категории'"
  [(visible)]="active"
  [draggable]="false"
  [resizable]="false"
>
  <ng-template pTemplate="content">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="block">
        @if(mode === 'edit'){
        <div class="block__categories">
          <p-dropdown
            *ngIf="categories() as categories"
            [style]="{ width: '100%' }"
            appendTo="body"
            [options]="categories"
            formControlName="id"
            [showClear]="true"
            optionLabel="title"
            optionValue="id"
          ></p-dropdown>
        </div>
        <p>на</p>
        }
        <input
          trimOnBlur
          class="input"
          formControlName="title"
          type="text"
          pInputText
        />
      </div>
      <div class="footer">
        @if(mode === 'add'){
        <div class="footer__setAll">
          <p-checkbox
            [binary]="true"
            inputId="setAll"
            formControlName="setAll"
          ></p-checkbox>
          <label for="setAll">{{
            "Добавить ко всем задачам без категории"
          }}</label>
        </div>
        }

        <div class="footer__buttons">
          <p-button
            type="submit"
            size="small"
            class="footer_button"
            [label]="mode === 'edit' ? 'Сохранить' : 'Добавить'"
            severity="danger"
            [plain]="true"
            [disabled]="this.form.invalid"
          ></p-button>
          <p-button
            (click)="active = false"
            size="small"
            label="Отмена"
            [text]="true"
            [plain]="true"
          ></p-button>
        </div>
      </div>
    </form>
  </ng-template>
</p-dialog>
