<p-overlayPanel
  [showCloseIcon]="true"
  [style]="{ width: '280px' }"
  [dismissable]="false"
  #overlay
>
  <ng-template pTemplate="content">
    <p-scrollPanel [style]="{ width: '100%', height: '50vh' }">
      <form action="" class="form" [formGroup]="form">
        <div class="header">
          <i class="pi pi-filter"></i>
          <p>Фильтры</p>
        </div>
        <p-divider type="solid"></p-divider>

        <label for="description" class="label">Название</label>
        <input
          pInputText
          id="description"
          formControlName="description"
          type="text"
          placeholder="Введите название"
        />
        <p-divider type="solid"></p-divider>
        <label for="calendarId" class="label">Дата окончания:</label>
        <p-calendar
          inputId="calendarId"
          styleClass="width-100"
          placeholder="Выбрать"
          formControlName="endDate"
          [showIcon]="true"
          [showClear]="true"
          appendTo="body"
        ></p-calendar>

        <p-divider type="solid"></p-divider>
        <span class="label">Приоритет:</span>
        <p-dropdown
          styleClass="width-100"
          placeholder="Выбрать"
          [showClear]="true"
          optionValue="priority"
          optionLabel="title"
          [options]="priorities"
          appendTo="body"
          formControlName="priority"
        >
          <ng-template let-option pTemplate="item">
            <div class="select__items">
              <i class="pi pi-flag"></i>
              <div highlightPriority [priority]="option.priority">
                {{ option.title }}
              </div>
            </div>
          </ng-template>
        </p-dropdown>
        <p-divider type="solid"></p-divider>
        <span class="label">Категория:</span>
        <p-dropdown
          styleClass="width-100"
          placeholder="Выбрать"
          [showClear]="true"
          [options]="categories() || []"
          formControlName="category"
          optionLabel="title"
          optionValue="id"
          appendTo="body"
        ></p-dropdown>
        <p-divider type="solid"></p-divider>
        <span class="label">Статус:</span>
        <p-dropdown
          styleClass="width-100"
          placeholder="Выбрать"
          [showClear]="true"
          [options]="statuses"
          formControlName="status"
          optionLabel="status"
          optionValue="status"
          appendTo="body"
        ></p-dropdown>
        <p-divider type="solid"></p-divider>

        <div class="footer">
          <p-button
            label="Очистить"
            severity="danger"
            size="small"
            [outlined]="true"
            (click)="clearFilter()"
          ></p-button>
          <p-button
            label="Применить"
            severity="info"
            size="small"
            (click)="applyFilter(overlay)"
          ></p-button>
        </div>
      </form>
    </p-scrollPanel>
  </ng-template>
</p-overlayPanel>
<p-button
  (click)="overlay.toggle($event)"
  severity="success"
  icon="pi pi-filter"
  iconPos="right"
  size="small"
  [text]="true"
  label="Фильтры"
></p-button>
